# 深蓝之树 (Deep Blue Tree) - Scratch扩展文档

## 概述

深蓝之树是一个强大的Scratch/TurboWarp扩展，为用户提供大量高级数学运算和人工智能相关的积木块。从基础的矩阵运算到复杂的神经网络计算，这个扩展旨在让TurboWarp用户能够接触到更深层次的数学和AI概念，并填补TurboWarp没有人工智能扩展的空缺。

## 基本信息

- **扩展名称**: 深蓝之树 (人工智能)
- **扩展ID**: E_SLZS
- **描述**: 提供大量运算符积木块，从指数运算到三角函数
- **作者**: ELLRA-蓝电 | Auska
- **许可证**: MIT

## 功能特性

### 1. 数组和列表操作
- **列表转数组**: 将TurboWarp列表转换为JSON数组格式
- **数组设置列表**: 将JSON数组内容设置到TurboWarp列表中

### 2. 矩阵运算
- **矩阵加法**: 执行两个矩阵的加法运算
- **矩阵乘法**: 执行两个矩阵的乘法运算
- **矩阵旋转**: 按指定角度(90度的倍数)旋转矩阵
- **多维张量生成器**: 创建指定维度的多维矩阵
- **多维张量运算器**: 执行多维矩阵的加法和乘法运算

### 3. 神经网络基础
- **神经网络前向传播**: 计算输入层与权重矩阵的乘积
- **反向传播计算**: 计算神经网络的反向传播梯度
- **带激活函数的反向传播**: 支持ReLU、Sigmoid和Tanh激活函数
- **权重更新**: 根据梯度和学习率更新神经网络权重
- **偏置更新**: 根据梯度和学习率更新神经网络偏置
- **偏置梯度计算**: 计算神经网络偏置的梯度

### 4. 激活函数
- **ReLU激活**: 整流线性单元激活函数
- **ELU激活**: 指数线性单元激活函数
- **Swish激活**: Swish激活函数
- **Sigmoid激活**: S型激活函数

### 5. 损失函数
- **均方误差损失(MSE)**: 计算预测值与真实值的均方误差
- **二元交叉熵损失(BCE)**: 计算二元分类问题的交叉熵损失
- **Huber损失**: 结合MSE和MAE优点的损失函数

### 6. Dropout层
- **训练时Dropout**: 在训练过程中随机丢弃神经元
- **推理时Dropout**: 在推理过程中直接传递输入
- **带掩码输出的Dropout**: 返回dropout结果和使用的掩码
- **Alpha Dropout**: 保持均值和方差的Dropout变体

### 7. 向量运算
- **向量点积**: 计算两个向量的点积
- **向量叉积**: 计算两个3维向量的叉积
- **向量欧氏距离**: 计算两个向量之间的欧氏距离
- **向量曼哈顿距离**: 计算两个向量之间的曼哈顿距离
- **向量余弦相似度**: 计算两个向量之间的余弦相似度
- **向量标准化**: 对向量进行L1、L2或无穷范数标准化

### 8. 独热编码
- **基本独热编码**: 将类别索引转换为独热编码
- **批量独热编码**: 批量处理多个类别的独热编码
- **带平滑的独热编码**: 实现标签平滑的独热编码
- **多标签独热编码**: 处理多标签分类问题的独热编码
- **独热解码**: 将独热编码解码为类别索引或概率

### 9. 文本处理
- **逐字符分词**: 将文本分割为字符数组

### 10. 字典操作
- **数组合并成字典**: 将键数组和值数组合并为字典
- **字典转数组**: 将字典转换为键值对数组
- **字典查找**: 在字典中查找键或值

## 使用示例

### 矩阵乘法示例
```
将 [1,2,3] 设为数组 A
将 [1,4,7,2,5,8,3,6,9] 设为数组 B
设置 [结果] 为 1w*2w矩阵计算[A]x[B]
```

### 神经网络前向传播示例
```
将 [0.5,0.8] 设为数组 输入
将 [0.1,0.2,0.3,0.4] 设为数组 权重
设置 [输出] 为 1w*2w矩阵计算[输入]x[权重] 2
```

### 独热编码示例
```
将 [0,2,1] 设为数组 类别
设置 [编码结果] 为 基本独热编码[类别] 3
```

## 技术细节

### 数据格式
- 所有数组操作都使用JSON格式字符串进行输入和输出
- 矩阵以一维数组形式存储，按行优先顺序排列
- 多维矩阵使用嵌套数组表示

### 性能优化
- 矩阵运算使用优化的算法实现
- 支持多线程计算以提升大矩阵运算性能
- 使用Float32Array进行数值计算以提高精度和性能

### 错误处理
- 所有积木块都包含错误处理机制
- 输入格式错误时返回空数组或默认值
- 维度不匹配时返回空数组

## 国际化支持

扩展暂不支持多语言界面，只包括：
- X 德语 (de)
- X 芬兰语 (fi)
- X 意大利语 (it)
- X 日语 (ja)
- X 韩语 (ko)
- X 挪威语 (nb)
- X 荷兰语 (nl)
- X 俄语 (ru)
- X 乌克兰语 (uk)
- O 中文 (zh-cn)

## 扩展依赖

- TurboWarp 1.14.4 或更高版本
- 可选: TensorFlow.js (用于高级AI功能)

## 许可证

本项目采用MIT许可证。详见LICENSE文件。

## 贡献指南

欢迎贡献代码和建议！请遵循以下步骤：
1. Fork本项目
2. 创建您的特性分支
3. 提交您的更改
4. 推送到分支
5. 创建Pull Request

## 联系方式

如有问题或建议，请联系作者：
- ELLRA - 蓝电
- Auska

## 更新日志

### v1.0.0
- 初始版本发布
- 实现基础矩阵运算
- 添加神经网络基础功能
- 支持多种激活函数和损失函数
- 实现Dropout层功能
- 添加向量运算功能
- 支持独热编码和解码
- 实现基本文本处理功能
- 添加字典操作功能

---

*深蓝之树 - 让AI和高级数学运算在Scratch中变得简单易用*
